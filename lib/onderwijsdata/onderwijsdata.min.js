var Surfnet=Surfnet||{};
Surfnet.OnderwijsData=function(a,d){this.config={endpoint:a,auth:{token:d}};this.init=function(){"/"!=this.config.endpoint.slice(-1)&&(this.config.endpoint+="/")};this.createPersonClient=function(){return new this.PersonClient(this.config)};this.createBuildingClient=function(){return new this.BuildingClient(this.config)};this.createRoomClient=function(){return new this.RoomClient(this.config)};this.createGroupClient=function(){return new this.GroupClient(this.config)};this.createNewsFeedClient=function(){return new this.NewsFeedClient(this.config)};
this.createNewsItemClient=function(){return new this.NewsItemClient(this.config)};this.createCourseResultClient=function(){return new this.CourseResultClient(this.config)};this.createMinorClient=function(){return new this.MinorClient(this.config)};this.createTestResultClient=function(){return new this.TestResultClient(this.config)};this.createCourseClient=function(){return new this.CourseClient(this.config)};this.createScheduleClient=function(){return new this.ScheduleClient(this.config)};this.init()};
Surfnet.OnderwijsData.APIClient={};
Surfnet.OnderwijsData.APIClient.prototype=function(){function a(g){var a=[],d;for(d in g)g.hasOwnProperty(d)&&a.push(encodeURIComponent(d)+"="+encodeURIComponent(g[d]));return a.join("&")}function d(a){if(null==a&&"[object Function]"!=Object.prototype.toString.call(a))throw Error('Callback is missing, include "function (error, data) { }" as parameter');}function b(a){return"[object Function]"==Object.prototype.toString.call(a)}function c(){var a=this.config.endpoint;"/"!=a.slice(-1)&&(a+="/");return a}
function k(d,b,c){null!=b&&(d=d+"?"+a(b));var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e.open("GET",d,!0);e.setRequestHeader("Accept","application/json");null!=this.config.auth.token&&e.setRequestHeader("Authorization","Bearer "+this.config.auth.token);e.onreadystatechange=function(){var a;4==e.readyState&&(a=e.status,200==a?(a=JSON.parse(e.responseText),c(null,a)):c(e.responseText,null))};e.send()}function l(a,c,f){2==arguments.length&&b(c)&&(f=c,c=null);
if(null==a||b(a))throw Error('First argument should be "url"');d(f);k.call(this,a,c,f)}return{getList:function(a,h){1==arguments.length&&b(a)&&(h=a,a=null);d(h);var f=c.call(this)+this.modelUrl;k.call(this,f,a,h)},getById:function(a,d,f){2==arguments.length&&b(d)&&(f=d,d=null);if(null==a||b(a))throw Error('First argument should be "id"');var e=c.call(this)+this.modelUrl,e=e+("/"+a.toString());l.call(this,e,d,f)},get:l}}();Surfnet.OnderwijsData.Tools=function(){};
Surfnet.OnderwijsData.Tools.extend=function(a,d){var b=function(){};b.prototype=d.prototype;a.prototype=new b;a.prototype.constructor=a};Surfnet.OnderwijsData.prototype.BuildingClient=function(a){this.config=a;this.modelUrl="buildings"};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.BuildingClient,Surfnet.OnderwijsData.APIClient);Surfnet.OnderwijsData.prototype.CourseClient=function(a){this.config=a;this.modelUrl="courses"};
Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.CourseClient,Surfnet.OnderwijsData.APIClient);Surfnet.OnderwijsData.prototype.CourseResultClient=function(a){this.config=a;this.modelUrl="courseresults";this.getByOwner=function(a,b,c){a=a+"/"+this.modelUrl;this.get(a,b,c)};this.getByPersonId=function(a,b,c){this.get(this.config.endpoint+"persons/"+a+"/"+this.modelUrl,b,c)}};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.CourseResultClient,Surfnet.OnderwijsData.APIClient);
Surfnet.OnderwijsData.prototype.GroupClient=function(a){this.config=a;this.modelUrl="groups"};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.GroupClient,Surfnet.OnderwijsData.APIClient);Surfnet.OnderwijsData.prototype.MinorClient=function(a){this.config=a;this.modelUrl="minors"};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.MinorClient,Surfnet.OnderwijsData.APIClient);Surfnet.OnderwijsData.prototype.NewsFeedClient=function(a){this.config=a;this.modelUrl="newsfeeds"};
Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.NewsFeedClient,Surfnet.OnderwijsData.APIClient);Surfnet.OnderwijsData.prototype.NewsItemClient=function(a){this.config=a;this.modelUrl="newsitems"};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.NewsItemClient,Surfnet.OnderwijsData.APIClient);Surfnet.OnderwijsData.prototype.PersonClient=function(a){this.config=a;this.modelUrl="persons"};
Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.PersonClient,Surfnet.OnderwijsData.APIClient);Surfnet.OnderwijsData.prototype.RoomClient=function(a){this.config=a;this.modelUrl="rooms"};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.RoomClient,Surfnet.OnderwijsData.APIClient);
Surfnet.OnderwijsData.prototype.ScheduleClient=function(a){this.config=a;this.modelUrl="schedule";this.getByOwner=function(a,b,c){a=a+"/"+this.modelUrl;this.get(a,b,c)};this.getByPersonId=function(a,b,c){this.get(this.config.endpoint+"persons/"+a+"/"+this.modelUrl,b,c)};this.getByRoomId=function(a,b,c){this.get(this.config.endpoint+"rooms/"+a+"/"+this.modelUrl,b,c)}};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.ScheduleClient,Surfnet.OnderwijsData.APIClient);
Surfnet.OnderwijsData.prototype.TestResultClient=function(a){this.config=a;this.modelUrl="testresults";this.getByOwner=function(a,b,c){a=a+"/"+this.modelUrl;this.get(a,b,c)};this.getByPersonId=function(a,b,c){this.get(this.config.endpoint+"persons/"+a+"/"+this.modelUrl,b,c)}};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.TestResultClient,Surfnet.OnderwijsData.APIClient);
